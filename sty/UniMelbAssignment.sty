%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% UniMelb Assignment Template
% Created by Yuci Jiang on 31/Aug/2016.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Head Setting
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{./sty/UniMelbAssignment}[31/08/2016]
\typeout{UniMelb Assignment}
\def\UniMelbversion{Version 1.0}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Options Declaration 
\RequirePackage{kvoptions}
\RequirePackage{etoolbox}
\SetupKeyvalOptions{family=UniMelb, prefix=UniMelb@opt@, setkeys=\kvsetkeys}
\newcommand{\skv}[1]{\kvsetkeys{UniMelb}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Options
\DeclareStringOption[One]{Semester}[One]
\DeclareStringOption[I]{AssignNo}[I]
\DeclareStringOption[000000]{StuID}[000000]
\DeclareStringOption[MAST00000]{SubCode}[MAST00000]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Default Options, Processing and Handle Options
\DeclareDefaultOption{\relax}
\ProcessKeyvalOptions*\relax
\newcommand{\semester}{\UniMelb@opt@Semester}
\newcommand{\assignno}{\UniMelb@opt@AssignNo}
\newcommand{\stuid}{\UniMelb@opt@StuID}
\newcommand{\subcode}{\UniMelb@opt@SubCode}
\renewcommand{\thesubsection}{(\alph{subsection})}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Required Packages
\RequirePackage{fancyhdr,fancybox}        % personalize page header
\RequirePackage{lastpage}                 % refer to the number of last page
\RequirePackage{listings
}                 % format source code
\RequirePackage[toc,page,title,titletoc,header]
              {appendix}                  % Appendix
\RequirePackage{paralist}
\RequirePackage{amsthm,amsfonts}
\RequirePackage{amsmath,bm}               % AMSLaTeX
\RequirePackage{amssymb,mathrsfs}         % AMSLaTeX sym-bols
\usepackage{pgfpict2e}
\RequirePackage{latexsym} 
\RequirePackage{algorithm}
\RequirePackage[noend]{algpseudocode}
%\RequirePackage{caption}
\RequirePackage{longtable,multirow,
              hhline,tabularx,array,diagbox}      % tables
\RequirePackage{flafter}
\RequirePackage{pifont,calc}
\RequirePackage{colortbl,booktabs}
\RequirePackage{geometry}                 % page layout
\RequirePackage[T1]{fontenc}
\RequirePackage[scaled]{berasans}
\RequirePackage{hyperref}                 % hyper referance
\RequirePackage{natbib}                   % Different Formats of Citation
\RequirePackage{subfig}
\RequirePackage{tikz}
\RequirePackage{booktabs}
\RequirePackage{palatino}
\RequirePackage{float}
\RequirePackage{graphicx}
\RequirePackage{xcolor,color}
\RequirePackage{sectsty}
\RequirePackage{courier}
\usepackage{xeCJK}
\setmainfont{Times New Roman}
\setsansfont{Cochin}
\setmonofont{Courier}
\setCJKmainfont{STSongti-SC-Regular}
\setCJKmonofont{STSongti-SC-Bold}
\newfontfamily{\Cochin}{Cochin}
\newfontfamily{\OET}{Old English Text MT}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Details Settings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ----- page layout -----
\geometry{a4paper, margin = 2.5cm}
\usepackage{indentfirst}
\setlength{\parskip}{1em}
% ----- hyperref setup -----
\hypersetup{hidelinks}

% 每页图片数style: float counter
%\setcounter{totalnumber}{8}
%\setcounter{topnumber}{8}
%\setcounter{bottomnumber}{8}
%很多人发现缺省的浮动参数过于严格了。下面的命令
%\renewcommand{\textfraction}{0.15}
%\renewcommand{\topfraction}{0.85}
%\renewcommand{\bottomfraction}{0.65}
%\renewcommand{\floatpagefraction}{0.60}
%\renewcommand{\thesubsection}{(\alph{subsection})}
%将浮动参数重新设置为更宽松的值。---选自《Using Import graphics in LATEX2e》

%%%%%%%%%%%%%%%%%%%%
% Algorithm
\algblock{For}{EndFor}
\algloopdefx{For}[3]{\textbf{for} #1 $\gets$ #2 \textbf{to} #3}
%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%
% Bibtex
\setcitestyle{square,super} % Optional parameter: [round,square],[super, numbers, authoryear]

%%%%%%%%%%%%%%%%%%%%
% Table & figure caption font size and face
%\renewcommand{\figurename}{Fig}
%\renewcommand{\tablename}{Tab}

%%%%%%%%%%%%%%%%%%%%
% Figure include path
\graphicspath{{./img/}}

%%%%%%%%%%%%%%%%%%%%
% New command
\newtheorem{theorem}{Theorem}%[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}

%%%%%%%%%%%%%%%%%%%%
% Define Color
\definecolor{grey}{rgb}{0.8,0.8,0.8}
\definecolor{darkgrey}{rgb}{0.5,0.5,0.5}
\definecolor{darkgreen}{rgb}{0,0.6,0}
\definecolor{darkblue}{rgb}{0,0,1}
\definecolor{purple}{rgb}{0.75,0.4,0.95}
\definecolor{black}{rgb}{0,0,0}

%%%%%%%%%%%%%%%%%%%%%%
% Code List
\def\lstbasicfont{\fontfamily{courier}\selectfont\footnotesize}
\lstset
{
% indexing
    numbers = left,
    numberstyle = \tiny,%
    %stepnumber = 5,
    numbersep = 18pt,
    numberblanklines = false,
    numberstyle = \color{darkgrey},
% character display
    showstringspaces = true,
    showspaces = false,
    tabsize = 4,
% style
    frame = single,
    framerule = 1pt,
    rulecolor = \color{darkgrey},
    framexleftmargin = 30pt,
    framexrightmargin = 30pt,
    basicstyle = \small \ttfamily,
    keywordstyle = \color{darkblue}\bfseries,
    identifierstyle = ,
    commentstyle = \color{darkgreen},%\itshape,%
    stringstyle = \color{purple},
    % margin
    xleftmargin = 50pt,
    xrightmargin = 50pt,
    breaklines = true
}

\DeclareCaptionFormat{listing}{\colorbox[rgb]{1,1,1}{\parbox{\dimexpr\textwidth-2\fboxsep\relax}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,singlelinecheck=false, margin=15pt, font={bf,large}}

\lstloadlanguages{C,C++,Python,R,Matlab,Mathematica}

%%%%%%%%%%%%%%%%%%%%
% Header and Foot
\setcounter{page}{1}
\pagestyle{fancy}
\lhead{\small Mathematics and Statistics}
\chead{}
\rhead{\small University of Melbourne}
\lfoot{}
%\cfoot{\thepage\ / \pageref{LastPage}}
\cfoot{\thepage}
\rfoot{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Maketitle
\def\@maketitle{%
  \newpage
  \null
  \hrule
  \linespread{1}
  \vskip 1.5em%
  \begin{center}
\Cochin
    \let \footnote \thanks
    {\OET  \LARGE The University of Melbourne \par
    Department of Mathematics and Statistics \par
    \Cochin
    \subcode \ \@title \par
     Semester \semester \par
     Assignment \assignno \par}%
    \vskip 1em%
    {\large
      \begin{tabular}[t]{c}%
        \@author \\
        StuID: \stuid
      \end{tabular}\par}%
    \vskip 1em%
    %{\large \@date}%
  \end{center}%
  \par
   \null
  \hrule
  \vskip 2.5em
  }
%%%%%%%%%%%%%%%%%%%%
% Section, subsection, subsubsection setting
\allsectionsfont{\Cochin}
\renewcommand{\thesection}{Question \arabic{section}}
\newcommand*{\QEDB}{\hfill\ensuremath{\blacksquare}}%
\newcommand*{\QEDA}{\hfill\ensuremath{\square}}%
\endinput